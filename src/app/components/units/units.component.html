<div class="units">
  <mat-accordion multi="true">
    <mat-expansion-panel class="steel" expanded="true" *ngFor="let unitType of unitTypes | enumToArray">
      <mat-expansion-panel-header>
        <mat-panel-title class="button-text-background">
          {{unitType | titlecase}}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div *ngFor="let unit of getUnits(unitTypes[unitType])">
        <button mat-raised-button class="wood" (click)="setFocusedUnit(unit)" [class.selected]="focusedUnit === unit">
          <!-- <mat-card-title class="button-text-background">
            {{unit.name}} - {{unit.currentStateString}}
          </mat-card-title> -->

          <mat-card-content>
            <div id="left-content">
              <div class="button-text-stroke">
                {{unit.currentStateString}}
              </div>

              <div class="stat">
                <div class="stat-text">
                  Health
                </div>
                <mat-progress-bar class="stat-bar" [value]="(unit.health / unit.maxHealth) * 100"></mat-progress-bar>
              </div>

              <div class="stat">
                <div class="stat-text">
                  Fed
                </div>
                <mat-progress-bar class="stat-bar" [value]="unit.fedPercentage * 100"></mat-progress-bar>
              </div>
            </div>

            <div id="inventory">
              <div class="slot" *ngFor="let slot of unit.inventory">
                <div class="slot-size" *ngIf="slot.resourceEnum !== null">
                  {{slot.amount | number:'1.0-0'}}
                </div>
                <img class="resource-img" *ngIf="slot.resourceEnum !== null" id="{{getResource(slot.resourceEnum).name | resourceId}}"
                  src="assets/sprites/transparent.png" alt="{{getResource(slot.resourceEnum).name}}">
                <img class="background" src="assets/sprites/inventoryBack.png" width="48px" height="48px">
              </div>
            </div>
          </mat-card-content>
        </button>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>
