<mat-checkbox class="hidePurchased button-text-background" checked="true" [(ngModel)]="hidePurchasedUpgrades">Hide Purchased Upgrades</mat-checkbox>
<br />
<br />

<mat-accordion multi="true" class="upgrades" [ngClass]="{'slim-interface': game.settings.slimInterface}">
  <mat-expansion-panel class="steel" expanded="true" *ngFor="let upgradeVariable of upgradeVariables | enumToArray">
    <mat-expansion-panel-header>
      <mat-panel-title class="button-text-background">
        {{upgradeVariableNames[upgradeVariable]}}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="upgrade-container" *ngFor="let upgrade of getUpgrades(false, hidePurchasedUpgrades, game.admin.filterAccessible, undefined, upgradeVariable)"
    appTippy [tippyOptions]="{
      arrow: true,
      placement: 'left',
      delay: 0,
      html: '#tooltip-upgrade-' + upgrade.id,
      popperOptions: {
        modifiers: {
          preventOverflow: {
            boundariesElement: 'window'
          }
        }
      }
    }">
      <button class="slim wood" mat-raised-button
        color="accent" [disabled]='upgrade.purchased || !canAffordUpgrade(upgrade.id)' (click)='purchaseUpgrade(upgrade.id)'>
          <div class="title button-text-bold">
            <b>
              <mat-icon *ngIf="upgrade.purchased" color="accent">check</mat-icon>
            </b>
            {{upgrade.name}}
          </div>

          <div class="resource-list">
            <div *ngFor="let resourceCost of upgrade.resourceCosts" class="button-text-bold">
              <img id="{{getResource(resourceCost.resourceEnum).name | resourceId}}" class="resource-img slim-icon" src="assets/sprites/transparent.png" alt="{{getResource(resourceCost.resourceEnum).name}}">
              {{resourceCost.resourceCost | longNumber}}
            </div>
          </div>
      </button>
    </div>
  </mat-expansion-panel>
</mat-accordion>
